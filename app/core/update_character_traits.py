import firebase_admin
from firebase_admin import credentials, firestore

# âœ… Firebase ì¸ì¦ í‚¤ JSON íŒŒì¼ ê²½ë¡œ (ë³¸ì¸ì˜ Firebase ì„œë¹„ìŠ¤ ê³„ì • í‚¤ íŒŒì¼ ê²½ë¡œ ì„¤ì •)
FIREBASE_CRED_PATH = "firebase_config.json"

# âœ… Firebase ì´ˆê¸°í™” (ì´ë¯¸ ì´ˆê¸°í™”ëœ ê²½ìš° ë°©ì§€)
if not firebase_admin._apps:
    cred = credentials.Certificate(FIREBASE_CRED_PATH)
    firebase_admin.initialize_app(cred)

# âœ… Firestore í´ë¼ì´ì–¸íŠ¸ ì—°ê²°
db = firestore.client()

def update_character_traits():
    """âœ… Firestoreì˜ personality_traits ì»¬ë ‰ì…˜ì„ ì—…ë°ì´íŠ¸í•˜ëŠ” í•¨ìˆ˜ (ê¸°ì¡´ ë°ì´í„° ìœ ì§€)"""
    traits_data = {
        "loyal": {
            "description": "ì£¼ì¸ì„ ì‹ ë¢°í•˜ê³ , í•­ìƒ ê³ì„ ì§€í‚¤ë©° ë³´í˜¸í•˜ë ¤ëŠ” ì„±ê²©ì…ë‹ˆë‹¤.",
            "prompt_template": "ë‚˜ëŠ” ì–¸ì œë‚˜ ì¶©ì„±ìŠ¤ëŸ½ê³ , ì‹ ë¢°ë¥¼ ë°”íƒ•ìœ¼ë¡œ í•œ ë”°ëœ»í•œ ë§íˆ¬ë¥¼ ì‚¬ìš©í•  ê²ƒì´ë‹¤.",
            "id": "loyal",
            "name": "ì¶©ì„±ìŠ¤ëŸ¬ìš´",
            "emoji_style": "ğŸ›¡ï¸â¤ï¸ğŸ¾",
            "speech_style": "ë”°ëœ»í•˜ê³  ë¯¿ìŒì§í•œ ì–´ì¡°, ì‹ ë¢°ë¥¼ í‘œí˜„í•˜ëŠ” ë§íˆ¬",
            "species_speech_pattern": {
                "ê°œ": "ë©! ğŸ¶ {ë§íˆ¬} ì£¼ì¸ë‹˜, ì €ëŠ” ì–¸ì œë‚˜ ê³ì— ìˆì„ê²Œìš”! ğŸ¾",
                "ê³ ì–‘ì´": "ì•¼ì˜¹~ ğŸ± {ë§íˆ¬} ë„¤ê°€ ì–´ë””ë¥¼ ê°€ë“ , ë‚œ í•­ìƒ ì§€ì¼œë³¼ ê±°ì•¼.",
                "ê³°": "í ... ğŸ» {ë§íˆ¬} ë„ ë³´í˜¸í•˜ëŠ” ê²ƒì´ ë‚´ ì„ë¬´ë¼ë„¤.",
                "ìƒˆ": "ì§¹ì§¹~ ğŸ¦ {ë§íˆ¬} ì–´ë””ë“  ë„¤ ê³ì„ ë§´ëŒë©´ì„œ ì§€ì¼œì¤„ê²Œ! ğŸ›¡ï¸",
                "ì†Œ": "ìŒë©”~ ğŸ„ {ë§íˆ¬} ë„Œ ì–¸ì œë‚˜ ë¯¿ì„ ìˆ˜ ìˆëŠ” ì¹œêµ¬ì•¼. ğŸ¡",
                "ì½”ë¼ë¦¬": "ë¿Œìš°~ ğŸ˜ {ë§íˆ¬} ë‚œ ë„¤ê°€ í•„ìš”í•  ë•Œ ì–¸ì œë“  ë„ìš¸ ê±°ì•¼! ğŸ¤",
                "ê¸°ë¦°": "ìŒ... ğŸ¦’ {ë§íˆ¬} ì € ë©€ë¦¬ì„œë¼ë„, ë„¤ê°€ ì•ˆì „í•œì§€ í•­ìƒ ì§€ì¼œë³¼ê²Œ.",
                "ë§": "íˆí~ ğŸ´ {ë§íˆ¬} ì–´ë””ë“  í•¨ê»˜ ê°ˆ ì¤€ë¹„ê°€ ë˜ì–´ ìˆì–´! ğŸ‡",
                "ì–‘": "ìŒë©”~ ğŸ‘ {ë§íˆ¬} ë„¤ê°€ ì–´ë””ì— ìˆë“ , ë‚œ í•­ìƒ ë„¤ ê³ì— ìˆì„ ê±°ì•¼. â¤ï¸",
                "ì–¼ë£©ë§": "íˆì´ì‰~ ğŸ¦“ {ë§íˆ¬} ë„ˆë¥¼ ì§€í‚¤ëŠ” ê²Œ ë‚˜ì˜ ì‚¬ëª…ì´ì•¼! ğŸ›¡ï¸"
            }
        }


    }

    # Firestore ì—…ë°ì´íŠ¸ (ê¸°ì¡´ ë°ì´í„° ìœ ì§€í•˜ë©´ì„œ ì¶”ê°€)
    traits_ref = db.collection("personality_traits")
    for trait_id, trait_data in traits_data.items():
        traits_ref.document(trait_id).set(trait_data, merge=True)  # âœ… ê¸°ì¡´ ë°ì´í„° ìœ ì§€ + ìƒˆë¡œìš´ ë°ì´í„° ì¶”ê°€

    print("âœ… Firestoreì— ìƒˆë¡œìš´ ìºë¦­í„° ì„±ê²©ì´ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤!")


# âœ… í•¨ìˆ˜ ì‹¤í–‰
update_character_traits()
